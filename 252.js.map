{"version":3,"file":"252.js","mappings":"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","sources":["webpack://@dev/web/./src/constants.ts","webpack://@dev/web/./src/containers/Forms.module.scss?8e89","webpack://@dev/web/./src/containers/Forms.tsx","webpack://@dev/web/../../node_modules/classnames/index.js","webpack://@dev/web/./src/containers/Forms.module.scss"],"sourcesContent":["export enum Step {\n  Step1 = \"STEP_1\",\n  Step2 = \"STEP_2\",\n  Step3 = \"STEP_3\",\n}\n\nexport enum Action {\n  Init = \"INIT\",\n  Next = \"NEXT\",\n  Back = \"BACK\",\n  Logout = \"LOGOUT\",\n}\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./Forms.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./Forms.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { useMutation } from \"graphql-hooks\";\nimport cx from \"classnames\";\nimport { Step, Action } from \"../constants\";\nimport styles from \"./Forms.module.scss\";\n\nconst LOGIN_FLOW_MUTATION = `mutation LoginFlow($step: String,$action: String,\n  $loginStep1Input: LoginStep1Input, $loginStep2Input: LoginStep2Input) {\n  loginFlow(step: $step,action: $action,loginStep1Input:$loginStep1Input,loginStep2Input:$loginStep2Input) {\n    __typename\n    step\n    ... on LoginStep1 {\n      username\n      errors {\n        username\n      }\n    }\n    ... on LoginStep2 {\n      password\n      errors {\n        password\n      }\n    }\n  }\n}`;\n\nexport default function Section() {\n  const [flow] = useMutation(LOGIN_FLOW_MUTATION);\n  const [data, setData] = useState({});\n\n  const handleChange = useCallback(\n    (event) =>\n      (({\n        target: {\n          form: { name: step },\n          name,\n          value,\n        },\n      }) =>\n        Boolean(console.log([\"handleChange\"], { step, name, value })) ||\n        setData((data) => ({\n          ...data,\n          [step]: {\n            ...data[step],\n            [name]: value,\n          },\n        })))(event),\n    []\n  );\n  const handleSubmit = useCallback(\n    (event) =>\n      event.preventDefault() ||\n      (({\n        target: { name: step },\n        nativeEvent: {\n          submitter: { value: action },\n        },\n      }) =>\n        Boolean(console.log([\"handleSubmit\"], { step, action })) ||\n        flow({\n          variables: Object.assign(\n            { step, action },\n            {\n              [Step.Step1]: {\n                [Action.Next]: ({ username }) => ({\n                  loginStep1Input: { username },\n                }),\n              },\n              [Step.Step2]: {\n                [Action.Back]: () => ({}),\n                [Action.Next]: ({ password }) => ({\n                  loginStep2Input: { password },\n                }),\n              },\n              [Step.Step3]: {\n                [Action.Logout]: () => ({}),\n              },\n            }[step][action](data[step])\n          ),\n        })\n          .then(({ data }) => data.loginFlow)\n          .then(({ step, ...update }) => setData(() => ({ [step]: update }))))(\n        event\n      ),\n    [data]\n  );\n\n  useEffect(\n    () =>\n      flow()\n        .then(({ data }) => data.loginFlow)\n        .then(({ step, ...update }) => setData(() => ({ [step]: update }))),\n    []\n  );\n\n  return (\n    <section className={styles.Section}>\n      <h2>Forms</h2>\n      {data[Step.Step1] && (\n        <form\n          className={cx(styles.Form, data[Step.Step1].errors && styles.invalid)}\n          name={Step.Step1}\n          onSubmit={handleSubmit}\n        >\n          <fieldset>\n            <legend>Step1</legend>\n            <div>\n              <label\n                className={cx(\n                  styles.Field,\n                  data[Step.Step1].errors?.username && styles.invalid\n                )}\n              >\n                <span>Username</span>\n                <input\n                  name=\"username\"\n                  value={data[Step.Step1].username}\n                  onChange={handleChange}\n                  autoFocus\n                />\n                {data[Step.Step1].errors?.username && (\n                  <span>{data[Step.Step1].errors.username}</span>\n                )}\n              </label>\n            </div>\n            <div>\n              <button type=\"submit\" name=\"action\" value={Action.Next}>\n                Next\n              </button>\n            </div>\n          </fieldset>\n        </form>\n      )}\n      {data[Step.Step2] && (\n        <form\n          className={cx(styles.Form, data[Step.Step2].errors && styles.invalid)}\n          name={Step.Step2}\n          onSubmit={handleSubmit}\n        >\n          <fieldset>\n            <legend>Step2</legend>\n            <div>\n              <label\n                className={cx(\n                  styles.Field,\n                  data[Step.Step2].errors?.password && styles.invalid\n                )}\n              >\n                <span>Password</span>\n                <input\n                  name=\"password\"\n                  value={data[Step.Step2].password}\n                  onChange={handleChange}\n                  autoFocus\n                />\n                {data[Step.Step2].errors?.password && (\n                  <span>{data[Step.Step2].errors.password}</span>\n                )}\n              </label>\n            </div>\n            <div>\n              <button type=\"submit\" name=\"action\" value={Action.Next}>\n                Next\n              </button>\n              <button type=\"submit\" name=\"action\" value={Action.Back}>\n                Back\n              </button>\n            </div>\n          </fieldset>\n        </form>\n      )}\n      {data[Step.Step3] && (\n        <form\n          className={cx(styles.Form, data[Step.Step3].errors && styles.invalid)}\n          name={Step.Step3}\n          onSubmit={handleSubmit}\n        >\n          <fieldset>\n            <legend>Step3</legend>\n            <div>\n              <label>\n                <span>LoggedIn</span>\n              </label>\n            </div>\n            <div>\n              <button\n                type=\"submit\"\n                name=\"action\"\n                value={Action.Logout}\n                autoFocus\n              >\n                Logout\n              </button>\n            </div>\n          </fieldset>\n        </form>\n      )}\n    </section>\n  );\n}\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".HHGfdvALL8opRFX4T2Dp{color:blue}.zmbUS4qY6hyGuScChGns.yjjddBYwRSMIzHy7W6JZ fieldset{border-color:red}.mrN0PYufDWOQtcym4TuQ.yjjddBYwRSMIzHy7W6JZ{color:red}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Forms.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,UAAA,CAIE,oDACE,gBAAA,CAKJ,2CACE,SAAA\",\"sourcesContent\":[\".Section {\\n  color: blue;\\n}\\n.Form {\\n  &.invalid {\\n    fieldset {\\n      border-color: red;\\n    }\\n  }\\n}\\n.Field {\\n  &.invalid {\\n    color: red;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": \"HHGfdvALL8opRFX4T2Dp\",\n\t\"Form\": \"zmbUS4qY6hyGuScChGns\",\n\t\"invalid\": \"yjjddBYwRSMIzHy7W6JZ\",\n\t\"Field\": \"mrN0PYufDWOQtcym4TuQ\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["Step","Action","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","Section","flow","useMutation","data","setData","useState","handleChange","useCallback","event","target","form","name","step","value","Boolean","console","log","handleSubmit","preventDefault","nativeEvent","submitter","action","variables","Object","assign","Step1","Next","username","loginStep1Input","Step2","Back","password","loginStep2Input","Step3","Logout","then","loginFlow","update","useEffect","className","styles","cx","errors","onSubmit","onChange","autoFocus","type","hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","prototype","key","call","join","module","exports","default","___CSS_LOADER_EXPORT___","id","locals"],"sourceRoot":""}