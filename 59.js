"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[59],{3059:(e,n,t)=>{t.r(n),t.d(n,{default:()=>R});var o=t(2784),l=t(5992),r=t(1148),a=t(859),c=t(32),s=t(878),u=t(2779),i=t.n(u),m=t(6062),d=t.n(m),p=t(4036),f=t.n(p),E=t(6793),v=t.n(E),A=t(7892),g=t.n(A),w=t(1173),C=t.n(w),S=t(2464),b=t.n(S),h=t(5450),F={};F.styleTagTransform=b(),F.setAttributes=g(),F.insert=v().bind(null,"head"),F.domAPI=f(),F.insertStyleElement=C(),d()(h.Z,F);const x=h.Z&&h.Z.locals?h.Z.locals:void 0;function T(){return T=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},T.apply(this,arguments)}const k=(0,o.createContext)({});function y({form:e,handleChange:n,handleSubmit:t,...l}){return o.createElement(k.Provider,{value:{form:e,handleChange:n}},o.createElement("form",T({onSubmit:t},l,{className:i()(x.Form)})))}function I({...e}){return o.createElement("fieldset",e)}function L({...e}){return o.createElement("legend",e)}const P=(0,o.createContext)({});function B({name:e,...n}){return o.createElement(P.Provider,{value:{name:e}},o.createElement("div",n))}function Z({...e}){const{name:n}=(0,o.useContext)(P);return o.createElement("div",null,o.createElement("label",T({htmlFor:n},e)))}function G({...e}){const{name:n}=(0,o.useContext)(P),{form:t,handleChange:l}=(0,o.useContext)(k);return o.createElement("div",null,o.createElement("input",T({name:n,value:t[n],onChange:l},e)))}function _({...e}){return o.createElement("div",null,o.createElement("span",e))}function N({...e}){return o.createElement("div",null,o.createElement("button",T({type:"submit",name:"action"},e)))}let j,U;!function(e){e.Step1="STEP_1",e.Step2="STEP_2",e.Step3="STEP_3"}(j||(j={})),function(e){e.Init="INIT",e.Next="NEXT",e.Back="BACK",e.Logout="LOGOUT"}(U||(U={}));var D=t(3827),O={};O.styleTagTransform=b(),O.setAttributes=g(),O.insert=v().bind(null,"head"),O.domAPI=f(),O.insertStyleElement=C(),d()(D.Z,O);const z=D.Z&&D.Z.locals?D.Z.locals:void 0,Q=(e=>e.join())`
  mutation Signin(
    $flow: Flow
    $action: Action
    $step1: LoginStep1Input
    $step2: LoginStep2Input
  ) {
    signin(flow: $flow, action: $action, step1: $step1, step2: $step2) {
      __typename
      flow
      ... on Form {
        view
        errors {
          id
        }
      }
      ... on LoginStep1 {
        username
      }
      ... on LoginStep2 {
        password
      }
    }
  }
`;function R(){const[e]=(0,l.Db)(Q),[n,t]=function(e,n,t){const[l,u]=(0,o.useState)((()=>({form:{},view:null}))),i=(0,o.useMemo)((()=>new r.x),[]);(0,o.useEffect)((()=>{const n=i.pipe((0,c.g)(500),(0,s.z)((n=>(0,a.D)(e(n)))),(0,c.g)(500)).subscribe((e=>Boolean(console.log({mutate:e}))||u((({signin:{flow:e,view:n,errors:t,...o}})=>l=>console.log({data:l,flow:e,view:n,errors:t,form:o})||{...l,flow:e,view:n,errors:t,form:{...l.form,...o}})(e.data))));return i.next({}),()=>n.unsubscribe()}),[i]);const m=(0,o.useCallback)((e=>(({target:{name:e,value:n}})=>Boolean(console.log(["handleChange"],{name:e,value:n}))||u((t=>({...t,form:{...t.form,[e]:n}}))))(e)),[]),d=(0,o.useCallback)((e=>e.preventDefault()||(({nativeEvent:{submitter:{value:e}}})=>Boolean(console.log(["handleSubmit"],{action:e}))||i.next(((e,{flow:n,view:t,form:o})=>console.log({action:e,flow:n,view:t,form:o})||{variables:Object.assign({flow:n,action:e},{[j.Step1]:{[U.Next]:({username:e})=>({step1:{username:e}})},[j.Step2]:{[U.Back]:()=>({}),[U.Next]:({password:e})=>({step2:{password:e}})},[j.Step3]:{[U.Logout]:()=>({})}}[t][e](o))})(e,l)))(e)),[l]);return[l,()=>({form:l.form,handleChange:m,handleSubmit:d})]}(e);return console.log({data:n}),o.createElement("section",{className:z.Section},o.createElement("h2",null,"Forms"),n.view&&{[j.Step1]:()=>o.createElement(y,t(),o.createElement(I,null,o.createElement(L,null,"Step1"),o.createElement(B,{name:"username"},o.createElement(Z,null,"Username"),o.createElement(G,{autoFocus:!0})),o.createElement(_,null),o.createElement(N,{value:U.Next},"Next"))),[j.Step2]:()=>o.createElement(y,t(),o.createElement(I,null,o.createElement(L,null,"Step2"),o.createElement(B,{name:"password"},o.createElement(Z,null,"Password"),o.createElement(G,{autoFocus:!0})),o.createElement(_,null),o.createElement(N,{value:U.Next},"Next"),o.createElement(N,{value:U.Back},"Back"))),[j.Step3]:()=>o.createElement(y,t(),o.createElement(I,null,o.createElement(L,null,"Step3"),o.createElement(B,{name:"password"},o.createElement(Z,null,"LoggedIn")),o.createElement(_,null),o.createElement(N,{value:U.Logout,autoFocus:!0},"Logout")))}[n.view](n.form))}},5450:(e,n,t)=>{t.d(n,{Z:()=>c});var o=t(272),l=t.n(o),r=t(2609),a=t.n(r)()(l());a.push([e.id,".Y0oU17ATPuJ3r9UC_xZg{color:blue}.g4QOpCIIrfx1xI7gat6G.FkcPsz_TwMovCk7Gel3Q fieldset{border-color:red}.DXGw6UCkT0Ljh5PLAFlR.FkcPsz_TwMovCk7Gel3Q{color:red}","",{version:3,sources:["webpack://./src/components/styles.module.scss"],names:[],mappings:"AAAA,sBACE,UAAA,CAIE,oDACE,gBAAA,CAKJ,2CACE,SAAA",sourcesContent:[".Section {\n  color: blue;\n}\n.Form {\n  &.invalid {\n    fieldset {\n      border-color: red;\n    }\n  }\n}\n.Field {\n  &.invalid {\n    color: red;\n  }\n}\n"],sourceRoot:""}]),a.locals={Section:"Y0oU17ATPuJ3r9UC_xZg",Form:"g4QOpCIIrfx1xI7gat6G",invalid:"FkcPsz_TwMovCk7Gel3Q",Field:"DXGw6UCkT0Ljh5PLAFlR"};const c=a},3827:(e,n,t)=>{t.d(n,{Z:()=>c});var o=t(272),l=t.n(o),r=t(2609),a=t.n(r)()(l());a.push([e.id,".HHGfdvALL8opRFX4T2Dp{color:blue}.zmbUS4qY6hyGuScChGns.yjjddBYwRSMIzHy7W6JZ fieldset{border-color:red}.mrN0PYufDWOQtcym4TuQ.yjjddBYwRSMIzHy7W6JZ{color:red}","",{version:3,sources:["webpack://./src/containers/Forms.module.scss"],names:[],mappings:"AAAA,sBACE,UAAA,CAIE,oDACE,gBAAA,CAKJ,2CACE,SAAA",sourcesContent:[".Section {\n  color: blue;\n}\n.Form {\n  &.invalid {\n    fieldset {\n      border-color: red;\n    }\n  }\n}\n.Field {\n  &.invalid {\n    color: red;\n  }\n}\n"],sourceRoot:""}]),a.locals={Section:"HHGfdvALL8opRFX4T2Dp",Form:"zmbUS4qY6hyGuScChGns",invalid:"yjjddBYwRSMIzHy7W6JZ",Field:"mrN0PYufDWOQtcym4TuQ"};const c=a}}]);
//# sourceMappingURL=59.js.map