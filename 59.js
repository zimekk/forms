"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[59],{3059:(e,n,t)=>{t.r(n),t.d(n,{default:()=>R});var o=t(2784),r=t(5992),l=t(1148),a=t(859),s=t(32),c=t(878),u=t(2779),i=t.n(u),m=t(6062),d=t.n(m),p=t(4036),f=t.n(p),E=t(6793),v=t.n(E),A=t(7892),g=t.n(A),C=t(1173),S=t.n(C),w=t(2464),b=t.n(w),h=t(5450),F={};F.styleTagTransform=b(),F.setAttributes=g(),F.insert=v().bind(null,"head"),F.domAPI=f(),F.insertStyleElement=S(),d()(h.Z,F);const k=h.Z&&h.Z.locals?h.Z.locals:void 0;function x(){return x=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},x.apply(this,arguments)}const y=(0,o.createContext)({});function T({data:e,handleChange:n,handleSubmit:t,...r}){return o.createElement(y.Provider,{value:{...e,handleChange:n}},o.createElement("form",x({onSubmit:t},r,{className:i()(k.Form)})))}function I({...e}){return o.createElement("fieldset",e)}function P({...e}){return o.createElement("legend",e)}const L=(0,o.createContext)({});function B({name:e,...n}){const{errors:t}=(0,o.useContext)(y);return o.createElement(L.Provider,{value:{name:e,errors:(0,o.useMemo)((()=>(t||[]).filter((({path:n})=>n.join(".")===e))),[t])}},o.createElement("div",n))}function D({...e}){const{name:n}=(0,o.useContext)(L);return o.createElement("div",null,o.createElement("label",x({htmlFor:n},e)))}function G({...e}){const{name:n}=(0,o.useContext)(L),{form:t,handleChange:r}=(0,o.useContext)(y);return o.createElement("div",null,o.createElement("input",x({name:n,value:t[n],onChange:r},e)))}function Z({...e}){const{errors:n}=(0,o.useContext)(L);return n?o.createElement("ul",{className:k.Errors},n.map((({message:e},n)=>o.createElement("li",{key:n},e)))):null}function N({...e}){return o.createElement("div",null,o.createElement("button",x({type:"submit",name:"action"},e)))}let O,_;!function(e){e.Step1="STEP_1",e.Step2="STEP_2",e.Step3="STEP_3"}(O||(O={})),function(e){e.Init="INIT",e.Next="NEXT",e.Back="BACK",e.Logout="LOGOUT"}(_||(_={}));var j=t(3827),U={};U.styleTagTransform=b(),U.setAttributes=g(),U.insert=v().bind(null,"head"),U.domAPI=f(),U.insertStyleElement=S(),d()(j.Z,U);const z=j.Z&&j.Z.locals?j.Z.locals:void 0,Q=(e=>e.join())`
  mutation Signin(
    $flow: Flow
    $action: Action
    $step1: LoginStep1Input
    $step2: LoginStep2Input
  ) {
    signin(flow: $flow, action: $action, step1: $step1, step2: $step2) {
      __typename
      flow
      ... on Form {
        view
        errors {
          code
          message
          path
        }
      }
      ... on LoginStep1 {
        username
      }
      ... on LoginStep2 {
        password
      }
    }
  }
`;function R(){const[e]=(0,r.Db)(Q),[n,t]=function(e,n,t){const[r,u]=(0,o.useState)((()=>({form:{},view:null}))),i=(0,o.useMemo)((()=>new l.x),[]);(0,o.useEffect)((()=>{const n=i.pipe((0,s.g)(500),(0,c.z)((n=>(0,a.D)(e(n)))),(0,s.g)(500)).subscribe((e=>Boolean(console.log({mutate:e}))||u((({signin:{flow:e,view:n,errors:t,...o}})=>r=>console.log({data:r,flow:e,view:n,errors:t,form:o})||{...r,flow:e,view:n,errors:t,form:{...r.form,...o}})(e.data))));return i.next({}),()=>n.unsubscribe()}),[i]);const m=(0,o.useCallback)((e=>(({target:{name:e,value:n}})=>Boolean(console.log(["handleChange"],{name:e,value:n}))||u((t=>({...t,form:{...t.form,[e]:n}}))))(e)),[]),d=(0,o.useCallback)((e=>e.preventDefault()||(({nativeEvent:{submitter:{value:e}}})=>Boolean(console.log(["handleSubmit"],{action:e}))||i.next(((e,{flow:n,view:t,form:o})=>console.log({action:e,flow:n,view:t,form:o})||{variables:Object.assign({flow:n,action:e},{[O.Step1]:{[_.Next]:({username:e})=>({step1:{username:e}})},[O.Step2]:{[_.Back]:()=>({}),[_.Next]:({password:e})=>({step2:{password:e}})},[O.Step3]:{[_.Logout]:()=>({})}}[t][e](o))})(e,r)))(e)),[r]);return[r,()=>({data:r,handleChange:m,handleSubmit:d})]}(e);return console.log({data:n}),o.createElement("section",{className:z.Section},o.createElement("h2",null,"Forms"),n.view&&{[O.Step1]:()=>o.createElement(T,t(),o.createElement(I,null,o.createElement(P,null,"Step1"),o.createElement(B,{name:"username"},o.createElement(D,null,"Username"),o.createElement(G,{autoFocus:!0}),o.createElement(Z,null)),o.createElement(N,{value:_.Next},"Next"))),[O.Step2]:()=>o.createElement(T,t(),o.createElement(I,null,o.createElement(P,null,"Step2"),o.createElement(B,{name:"password"},o.createElement(D,null,"Password"),o.createElement(G,{autoFocus:!0}),o.createElement(Z,null)),o.createElement(N,{value:_.Next},"Next"),o.createElement(N,{value:_.Back},"Back"))),[O.Step3]:()=>o.createElement(T,t(),o.createElement(I,null,o.createElement(P,null,"Step3"),o.createElement(N,{value:_.Logout,autoFocus:!0},"Logout")))}[n.view](n.form))}},5450:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(272),r=t.n(o),l=t(2609),a=t.n(l)()(r());a.push([e.id,".Y0oU17ATPuJ3r9UC_xZg{color:blue}.g4QOpCIIrfx1xI7gat6G.FkcPsz_TwMovCk7Gel3Q fieldset{border-color:red}.DXGw6UCkT0Ljh5PLAFlR.FkcPsz_TwMovCk7Gel3Q{color:red}.O1DkzXeSlWwhWODvimtg{color:red}","",{version:3,sources:["webpack://./src/components/styles.module.scss"],names:[],mappings:"AAAA,sBACE,UAAA,CAIE,oDACE,gBAAA,CAKJ,2CACE,SAAA,CAGJ,sBACE,SAAA",sourcesContent:[".Section {\n  color: blue;\n}\n.Form {\n  &.invalid {\n    fieldset {\n      border-color: red;\n    }\n  }\n}\n.Field {\n  &.invalid {\n    color: red;\n  }\n}\n.Errors {\n  color: red;\n}\n"],sourceRoot:""}]),a.locals={Section:"Y0oU17ATPuJ3r9UC_xZg",Form:"g4QOpCIIrfx1xI7gat6G",invalid:"FkcPsz_TwMovCk7Gel3Q",Field:"DXGw6UCkT0Ljh5PLAFlR",Errors:"O1DkzXeSlWwhWODvimtg"};const s=a},3827:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(272),r=t.n(o),l=t(2609),a=t.n(l)()(r());a.push([e.id,".HHGfdvALL8opRFX4T2Dp{color:blue}.zmbUS4qY6hyGuScChGns.yjjddBYwRSMIzHy7W6JZ fieldset{border-color:red}.mrN0PYufDWOQtcym4TuQ.yjjddBYwRSMIzHy7W6JZ{color:red}","",{version:3,sources:["webpack://./src/containers/Forms.module.scss"],names:[],mappings:"AAAA,sBACE,UAAA,CAIE,oDACE,gBAAA,CAKJ,2CACE,SAAA",sourcesContent:[".Section {\n  color: blue;\n}\n.Form {\n  &.invalid {\n    fieldset {\n      border-color: red;\n    }\n  }\n}\n.Field {\n  &.invalid {\n    color: red;\n  }\n}\n"],sourceRoot:""}]),a.locals={Section:"HHGfdvALL8opRFX4T2Dp",Form:"zmbUS4qY6hyGuScChGns",invalid:"yjjddBYwRSMIzHy7W6JZ",Field:"mrN0PYufDWOQtcym4TuQ"};const s=a}}]);
//# sourceMappingURL=59.js.map